{"ast":null,"code":"'use strict';\n\nconst Topology = require('../core').Topology;\n\nconst ServerCapabilities = require('./topology_base').ServerCapabilities;\n\nconst Cursor = require('../cursor');\n\nconst translateOptions = require('../utils').translateOptions;\n\nclass NativeTopology extends Topology {\n  constructor(servers, options) {\n    options = options || {};\n    let clonedOptions = Object.assign({}, {\n      cursorFactory: Cursor,\n      reconnect: false,\n      emitError: typeof options.emitError === 'boolean' ? options.emitError : true,\n      maxPoolSize: typeof options.poolSize === 'number' ? options.poolSize : 5,\n      minPoolSize: typeof options.minSize === 'number' ? options.minSize : 0,\n      monitorCommands: typeof options.monitorCommands === 'boolean' ? options.monitorCommands : false\n    }); // Translate any SSL options and other connectivity options\n\n    clonedOptions = translateOptions(clonedOptions, options); // Socket options\n\n    var socketOptions = options.socketOptions && Object.keys(options.socketOptions).length > 0 ? options.socketOptions : options; // Translate all the options to the core types\n\n    clonedOptions = translateOptions(clonedOptions, socketOptions);\n    super(servers, clonedOptions);\n  }\n\n  capabilities() {\n    if (this.s.sCapabilities) return this.s.sCapabilities;\n    if (this.lastIsMaster() == null) return null;\n    this.s.sCapabilities = new ServerCapabilities(this.lastIsMaster());\n    return this.s.sCapabilities;\n  } // Command\n\n\n  command(ns, cmd, options, callback) {\n    super.command(ns.toString(), cmd, options, callback);\n  } // Insert\n\n\n  insert(ns, ops, options, callback) {\n    super.insert(ns.toString(), ops, options, callback);\n  } // Update\n\n\n  update(ns, ops, options, callback) {\n    super.update(ns.toString(), ops, options, callback);\n  } // Remove\n\n\n  remove(ns, ops, options, callback) {\n    super.remove(ns.toString(), ops, options, callback);\n  }\n\n}\n\nmodule.exports = NativeTopology;","map":{"version":3,"sources":["/home/rgukt/Projects/covid-19/node_modules/mongodb/lib/topologies/native_topology.js"],"names":["Topology","require","ServerCapabilities","Cursor","translateOptions","NativeTopology","constructor","servers","options","clonedOptions","Object","assign","cursorFactory","reconnect","emitError","maxPoolSize","poolSize","minPoolSize","minSize","monitorCommands","socketOptions","keys","length","capabilities","s","sCapabilities","lastIsMaster","command","ns","cmd","callback","toString","insert","ops","update","remove","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nconst Topology = require('../core').Topology;\nconst ServerCapabilities = require('./topology_base').ServerCapabilities;\nconst Cursor = require('../cursor');\nconst translateOptions = require('../utils').translateOptions;\n\nclass NativeTopology extends Topology {\n  constructor(servers, options) {\n    options = options || {};\n\n    let clonedOptions = Object.assign(\n      {},\n      {\n        cursorFactory: Cursor,\n        reconnect: false,\n        emitError: typeof options.emitError === 'boolean' ? options.emitError : true,\n        maxPoolSize: typeof options.poolSize === 'number' ? options.poolSize : 5,\n        minPoolSize: typeof options.minSize === 'number' ? options.minSize : 0,\n        monitorCommands:\n          typeof options.monitorCommands === 'boolean' ? options.monitorCommands : false\n      }\n    );\n\n    // Translate any SSL options and other connectivity options\n    clonedOptions = translateOptions(clonedOptions, options);\n\n    // Socket options\n    var socketOptions =\n      options.socketOptions && Object.keys(options.socketOptions).length > 0\n        ? options.socketOptions\n        : options;\n\n    // Translate all the options to the core types\n    clonedOptions = translateOptions(clonedOptions, socketOptions);\n\n    super(servers, clonedOptions);\n  }\n\n  capabilities() {\n    if (this.s.sCapabilities) return this.s.sCapabilities;\n    if (this.lastIsMaster() == null) return null;\n    this.s.sCapabilities = new ServerCapabilities(this.lastIsMaster());\n    return this.s.sCapabilities;\n  }\n\n  // Command\n  command(ns, cmd, options, callback) {\n    super.command(ns.toString(), cmd, options, callback);\n  }\n\n  // Insert\n  insert(ns, ops, options, callback) {\n    super.insert(ns.toString(), ops, options, callback);\n  }\n\n  // Update\n  update(ns, ops, options, callback) {\n    super.update(ns.toString(), ops, options, callback);\n  }\n\n  // Remove\n  remove(ns, ops, options, callback) {\n    super.remove(ns.toString(), ops, options, callback);\n  }\n}\n\nmodule.exports = NativeTopology;\n"]},"metadata":{},"sourceType":"script"}